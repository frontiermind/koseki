{htmlspchars_recursive($default)}
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="ja">
	<head>
	<meta http-equiv="content-type" content="text/html;charset=Shift_JIS">
	<title>フォーム項目設定</title>
	<link href="coolie.css" rel="stylesheet" type="text/css">
	<style type="text/css" media="screen">
	<!--
.class12  { color: white; font-weight: 500; font-size: 12px }
.class12r { color: #ff4500; font-size: 12px }
-->
	</style>
	<script language="JavaScript" type="text/javascript" src="coolie.js"></script>
	</head>

	<body bgcolor="white" leftmargin="0" marginheight="0" marginwidth="0" topmargin="0">
	<div align="left">
			<form method="post" action="admin.php" name="editQuery">
			<input type="hidden" name="mode" value="queryEdit">
			<input type="hidden" name="id" value="{$id}">
			<input type="hidden" name="no" value="{$no}">
			<input type="hidden" name="config[qtype]" value="{$default.qtype}">
			<table width="100%" border="0" cellspacing="0" cellpadding="0">
				<tr>
					<td class="class" bgcolor="#0066cc" width="20"></td>
					<td class="class" bgcolor="#0066cc" width="248">
						<div align="center">
							<img src="img/space.gif" alt="" height="5" width="32" border="0"></div>
					</td>
					<td class="class" bgcolor="#0066cc" width="18"></td>
					<td class="class" bgcolor="#0066cc"></td>
				</tr>
				<tr>
					<td class="class" bgcolor="white" width="20"></td>
					<td class="class" bgcolor="white" width="248">
						<div align="center">
							<img src="img/space.gif" alt="" height="5" width="32" border="0"></div>
					</td>
					<td class="class" bgcolor="white" width="18"></td>
					<td class="class" bgcolor="white"></td>
				</tr>
				<tr height="14">
					<td class="class_tbg" rowspan="2" bgcolor="#0066cc" width="20" height="28"><img src="img/space.gif" alt="" height="20" width="20" border="0"></td>
					<td class="class_tbg" rowspan="2" bgcolor="#0066cc" width="248" height="28"><img src="img/setei.gif" alt="" height="17" width="114" border="0"></td>
					<td rowspan="2" valign="top" width="18" height="28"><img src="img/bar_p.gif" alt="" height="30" width="18" border="0"></td>
					<td class="class_tbg" bgcolor="#0066cc" height="14">
						<div align="center">
							<img src="img/space.gif" alt="" height="12" width="1" border="0"></div>
					</td>
				</tr>
				<tr height="2">
					<td bgcolor="white" height="2"></td>
				</tr>
				<tr>
					<td width="20"></td>
					<td colspan="3">
						<div align="center">
							<img src="img/space.gif" alt="" height="5" width="1" border="0"></div>
					</td>
				</tr>
			</table>
			<table width="100%" border="0" cellspacing="0" cellpadding="0" background="img/back.jpg">
				<tr>
					<td class="class_tbg"><img src="img/koumoku.jpg" alt="" height="30" width="140" border="0"></td>
				  <td width="400" align="right" valign="middle" class="class_tbg" background="img/back.jpg" ><a href="admin.php" class="back">管理メニュー</a><span class="back"> &gt;&gt; </span><a href="admin.php?mode=formList" class="back">フォーム一覧</a><span class="back"> &gt;&gt; </span><a href="admin.php?mode=formEdit&id={$id}" class="back">フォーム設定</a><span class="back"> &gt;&gt; </span><a href="admin.php?mode=queryList&id={$id}" class="back">項目一覧 ▲</a><img src="img/space.gif" alt="" height="20" width="10" border="0"></td>
				</tr>
			</table>
			<table width="680" border="0" cellspacing="5" cellpadding="0" background="(EmptyReference!)">
				<tr height="20">
					<td colspan="3" align="left" height="20">
						<div align="center">
							<img src="img/space.gif" alt="" height="20" width="1" border="0"></div>
					</td>
				</tr>
				<tr>
					<td width="250" align="left" valign="top">■質問タイプ</td>
					<td align="left" width="20"></td>
					<td align="left">{php}$qTypeStr =include("config/masters/queryType.php"); echo mb_convert_encoding($qTypeStr[$default.qtype], "SJIS", "EUC-JP"){/php}</td>
				</tr>
				<tr>
					<td width="250" align="left" valign="top">■質問番号</td>
					<td align="left" width="20"><img src="img/space.gif" alt="" height="1" width="20" border="0"></td>
					<td align="left">{if ($err.no.empty)}<span class="errmsg">*入力してください</span><br>
						{elseif ($err.no.integer)}<span class="errmsg">*1以上の数字を入力してください</span><br>{/if}
						<input type="text" name="config[no]" value="{$default.no}" size="4" border="0"></td>
				</tr>
				<input type="hidden" name="config[position]" value="center">
<!--
				<tr>
					<td width="250" align="left" valign="top">■表示位置</td>
					<td align="left" width="20"></td>
					<td align="left">{if ($err.position.empty)}<span class="errmsg">*選択してください</span><br>{/if}
						<input type="radio" name="config[position]" value="left" border="0" {if ($default.position == 'left')}checked{/if}>左　<input type="radio" name="config[position]" value="center" border="0" {if ($default.position == 'center')}checked{/if}>中央　<input type="radio" name="config[position]" value="right" border="0" {if ($default.position == 'right')}checked{/if}>右</td>
				</tr>
-->
				<tr>
					<td width="250" align="left" valign="top">■質問文</td>
					<td align="left" width="20"></td>
					<td align="left">{if ($err.query.empty)}<span class="errmsg">*入力してください</span><br>{/if}
						<input type="text" name="config[query]" value="{$default.query}" size="50" border="0"></td>
				</tr>
{if ($default.qtype >= 1 and $default.qtype <= 6)}
				<tr valign="top" height="20">
					<td align="left" valign="top" width="250" height="20">■{if ($default.qtype <= 2)}ラジオボタン{elseif ($default.qtype <= 4)}チェックボックス{elseif ($default.qtype <= 6)}リスト{/if}項目設定</td>
					<td align="left" width="20" height="20"></td>
					<td height="20">{if ($err.answer_list.empty)}<span class="errmsg">*入力してください</span><br>{/if}
						<textarea name="config[answer_list]" rows="5" cols="30">{$default.answer_list}</textarea>※選択項目を入力（1行1項目）</td>
				</tr>
{else}
				<input type="hidden" name="config[answer_list]" value="NULL">
{/if}
{if ($default.qtype >= 1 and $default.qtype <= 8)}
				<tr>
					<td width="250" align="left" valign="top">■デフォルト値</td>
					<!--この項目はラジオ、チェックボックス、リストボックス、テキストフィールドの時のみ表示-->
					<td align="left" width="20"></td>
					<td align="left"><input type="text" name="config[selected]" value="{$default.selected}" size="30" border="0">{if ($default.qtype <= 6)}※選択項目のデフォルトを入力{/if}</td>
				</tr>
{/if}
{if ($default.qtype == 3 or $default.qtype == 4 or $default.qtype == 6)}
				<tr>
					<td width="250" align="left" valign="top">■選択可能数</td>
					<!--この項目はチェックボックス、複数選択リストボックスの時のみ表示-->
					<td align="left" width="20"></td>
					<td align="left">{if ($err.min_limit.integer or $err.max_limit.integer)}<span class="errmsg">*それぞれ1以上の数字を入力してください</span><br>{/if}
						<input type="text" name="config[min_limit]" value="{$default.min_limit}" size="4" border="0"> 個以上 <input type="text" name="config[max_limit]" value="{$default.max_limit}" size="4" border="0"> 個以下</td>
				</tr>
{/if}
{if ($default.qtype == 7 or $default.qtype == 8 or $default.qtype == 21)}
				<tr>
					<td width="250" align="left" valign="top">■フィールド表示桁数</td>
					<!--この項目はテキストフィールド、テキストボックス、メールアドレスの時のみ表示-->
					<td align="left" width="20"></td>
					<td>{if ($err.input_cols.empty)}<span class="errmsg">*入力してください</span><br>
						{elseif ($err.input_cols.integer)}<span class="errmsg">*1以上の数字を入力してください</span><br>{/if}
						<input type="text" name="config[input_cols]" value="{$default.input_cols}" size="4" border="0"></td>
				</tr>
{else}
				<input type="hidden" name="config[input_cols]" value="1">
{/if}
{if (($default.qtype == 5) || ($default.qtype == 6) || ($default.qtype == 8))}
				<tr>
					<td width="250" align="left" valign="top">■フィールド表示行数</td>
					<!--この項目はリスト、テキストボックスの時のみ表示-->
					<td align="left" width="20"></td>
					<td align="left">{if ($err.input_rows.empty)}<span class="errmsg">*入力してください</span><br>
						{elseif ($err.input_rows.integer)}<span class="errmsg">*1以上の数字を入力してください</span><br>{/if}
						<input type="text" name="config[input_rows]" value="{$default.input_rows}" size="4" border="0"></td>
				</tr>
{else}
				<input type="hidden" name="config[input_rows]" value="1">
{/if}
{if ($default.qtype == 7 or $default.qtype == 8 or $default.qtype == 21)}
				<tr>
					<td width="250" align="left" valign="top">■入力制限</td>
					<!--この項目はテキストフィールド、テキストボックス、メールアドレスの時のみ表示-->
					<td align="left" width="20"></td>
					<td align="left">
						<select name="config[input_type]" size="1">
{if ($default.qtype == 7 or $default.qtype == 8)}
							<option value="0" {if (!$default.input_type)}selected{/if}>制限なし</option>
							<option value="1" {if ($default.input_type == 1)}selected{/if}>英数字</option>
							<option value="2" {if ($default.input_type == 2)}selected{/if}>ひらがな</option>
							<option value="3" {if ($default.input_type == 3)}selected{/if}>カタカナ</option>
							<option value="4" {if ($default.input_type == 4)}selected{/if}>正規表現</option>
{elseif ($default.qtype == 21)}
							<option value="5" {if ($default.input_type == 5)}selected{/if}>制限なし</option>
							<option value="6" {if ($default.input_type == 6)}selected{/if}>携帯電話のみ</option>
							<option value="7" {if ($default.input_type == 7)}selected{/if}>携帯以外</option>
{/if}
						</select><br>
						{if ($err.input_regex.empty)}<span class="errmsg">*正規表現を入力してください</span><br>{/if}
						{if ($default.qtype == 7 or $default.qtype == 8)}*<a href="http://jp.php.net/manual/ja/pcre.pattern.syntax.php" target="_blank">正規表現（Perl互換）設定</a>&gt;&gt;
						<input type="text" name="config[input_regex]" value="{$default.input_regex}" size="30" border="0">{/if}
					</td>
				</tr>
{/if}
				<tr>
					<td width="250" align="left" valign="top">■項目前コメント</td>
					<td align="left" width="20"></td>
					<td align="left"><input type="text" name="config[precomment]" value="{$default.precomment}" size="30" border="0">　
					※質問文の下に表示されます</td>
				</tr>
				<tr>
					<td width="250" align="left" valign="top">■項目後コメント</td>
					<td align="left" width="20"></td>
					<td align="left"><input type="text" name="config[appcomment]" value="{$default.appcomment}" size="30" border="0">　
					※項目の下に表示されます</td>
				</tr>
				<tr>
					<td width="250" align="left" valign="top">■必須指定</td>
					<td align="left" width="20"></td>
					<td align="left"><input type="hidden" name="config[required]" value="0"><input type="checkbox" name="config[required]" value="1" border="0" {if ($default.required)}checked{/if}>必須</td>
				</tr>
				<tr>
					<td width="250" align="left" valign="top">■必須表示文</td>
					<td align="left" width="20"></td>
					<td align="left">{if ($err.required_text.empty)}<span class="errmsg">*入力してください</span><br>{/if}
						<input type="text" name="config[required_text]" value="{$default.required_text}" size="20" border="0"></td>
				</tr>
				<tr>
					<td width="250" align="left" valign="top">■必須表示文字色</td>
					<td align="left" width="20"></td>
					<td>{if ($err.required_text_color.empty)}<span class="errmsg">*入力してください</span><br>
						{elseif ($err.required_text_color.color)}<span class="errmsg">*正しく指定してください</span><br>{/if}
						<input type="text" name="config[required_text_color]" id="required_text_color" size="20" border="0" value="{$default.required_text_color}">
						<script language="JavaScript" type="text/javascript">document.write('<a href="javascript:;" onClick="popColorPicker(editQuery.required_text_color)">カラーピッカー</a>');</script></td>
				</tr>
				<tr>
					<td width="250" align="left" valign="top">■必須表示文字サイズ</td>
					<td align="left" width="20"></td>
					<td>{if ($err.required_text_size.empty)}<span class="errmsg">*入力してください</span><br>
						{elseif ($err.required_text_size.numeric)}<span class="errmsg">*数字で入力してください</span><br>{/if}
						<input type="text" name="config[required_text_size]" value="{$default.required_text_size}" size="4" border="0"> pt</td>
				</tr>
				
{if ($default.qtype == 21)}
				<tr>
					<td width="250" align="left" valign="top">■回答送信先指定</td>
					<td align="left" width="20"></td>
					<td align="left"><input type="hidden" name="config[send_mail_address]" value="0"><input type="checkbox" name="config[send_mail_address]" value="1" {if ($default.send_mail_address)}checked{/if}> 指定する<br>
					<span class="errmsg">管理者だけでなく回答者にも確認メールを送信したい場合はチェックを入れてください</span></td>
				</tr>
{/if}
			</table>
				<input type="submit" name="submitButtonName" value="設定">
			</form>
	</div>
{php}require_once "colorPicker.php"{/php}
	</body>

</html>